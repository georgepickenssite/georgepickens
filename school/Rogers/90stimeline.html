<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>90's History Timeline</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Comic+Neue:wght@700&display=swap');
    body {
      margin: 0;
      background:
        repeating-linear-gradient(135deg, #f5d300 0 40px, #ff3e96 0 80px, #29b6f6 0 120px, #f5d300 0 160px),
        #1a0033;
      font-family: 'Comic Neue', 'Comic Sans MS', cursive, sans-serif;
      color: #fff;
      min-height: 100vh;
      letter-spacing: 0.03em;
    }
    .timeline {
      position: relative;
      width: 900px;
      max-width: 98vw;
      margin: 60px auto 120px auto;
      min-height: 900px;
      z-index: 2;
      border: 6px solid #00ffea;
      border-radius: 32px 8px 32px 8px;
      box-shadow: 0 0 0 8px #ff3e96, 0 12px 40px #1a003388;
      background:
        linear-gradient(135deg, #ffffff66 0%, #fffded55 100%);
      backdrop-filter: blur(1px);
      padding-bottom: 48px;
      /* establish stacking context */
      overflow: visible;
    }
    .timeline-svg-wrapper {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      pointer-events: none;
      z-index: 1; /* BEHIND the items */
      overflow: visible;
    }
    .squiggle-svg {
      position: absolute;
      top: 0; left: 50%;
      transform: translateX(-50%);
      width: 340px;
      height: 100%;
      overflow: visible;
      pointer-events: none;
      z-index: 1;
    }
    .squiggle-path-outline {
      fill: none;
      stroke: #111;
      stroke-width: 30;
      filter: drop-shadow(0 0 10px #222c);
      opacity: 0.72;
    }
    .squiggle-path {
      fill: none;
      stroke: #fff;
      stroke-width: 18;
      filter: drop-shadow(0 2px 10px #fff4);
      opacity: 1;
    }
    .timeline-item {
      position: relative;
      width: 370px;
      margin: 90px 0;
      padding: 24px 32px 24px 32px;
      border-radius: 18px 6px 18px 6px;
      background: linear-gradient(120deg, #fff 80%, #e0ebff 100%);
      box-shadow:
        0 4px 0 0 #ff3e96,
        0 8px 36px #25007a66,
        0 0 0 8px #29b6f6;
      opacity: 0;
      transform: scale(0.93) rotate(-3deg) translateY(40px);
      transition: opacity 0.7s cubic-bezier(.5,1.5,.5,1), transform 0.7s cubic-bezier(.5,1.5,.5,1);
      z-index: 2;
      border: 3px dashed #0f0;
      font-family: 'Press Start 2P', 'Comic Neue', 'Comic Sans MS', cursive, sans-serif;
      font-size: 0.98em;
      text-shadow:
        2px 2px 0 #29b6f6,
        0 0 6px #ff3e9688;
    }
    .timeline-item.visible {
      opacity: 1;
      transform: scale(1) rotate(0deg) translateY(0);
      box-shadow:
        0 6px 0 0 #ff3e96,
        0 16px 52px #25007aaa,
        0 0 0 12px #29b6f6;
    }
    .timeline-item.left {
      left: 0;
      text-align: right;
      border-left: 8px solid #f5d300;
      border-right: none;
      background: linear-gradient(120deg, #fff 70%, #fffded 100%);
      transform: scale(0.93) rotate(-3deg) translateY(40px);
    }
    .timeline-item.right {
      left: 490px;
      text-align: left;
      border-right: 8px solid #ff3e96;
      border-left: none;
      background: linear-gradient(120deg, #fff 80%, #e0ebff 100%);
      transform: scale(0.93) rotate(3deg) translateY(40px);
    }
    .timeline-item h3 {
      margin: 0 0 12px 0;
      font-size: 1.03em;
      color: #f5d300;
      font-family: 'Press Start 2P', 'Comic Neue', cursive;
      font-weight: 700;
      background: linear-gradient(90deg, #ff3e96, #29b6f6, #f5d300);
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      letter-spacing: 0.1em;
      text-shadow: 2px 2px 0 #001155, 0 0 8px #00ffea99;
    }
    .timeline-item p {
      margin: 0;
      color: #222;
      text-shadow: 1px 1px 0 #fff, 0 0 2px #ff3e9666;
      font-family: 'Comic Neue', 'Comic Sans MS', cursive, sans-serif;
      font-size: 1.08em;
    }
    .timeline-item:before {
      content: "";
      display: block;
      position: absolute;
      width: 72px; height: 32px;
      top: -28px;
      left: -20px;
      background: url('https://svgshare.com/i/17kz.svg') no-repeat center/contain;
      opacity: 0.7;
      z-index: 10;
      pointer-events: none;
      transform: rotate(-8deg);
    }
    .timeline-item.right:before {
      left: unset;
      right: -20px;
      transform: rotate(8deg) scaleX(-1);
    }
    .timeline:after {
      content: "";
      position: absolute;
      left: 20px;
      right: 20px;
      top: -30px;
      height: 36px;
      background: url('https://svgshare.com/i/17kA.svg') repeat-x center/auto 32px;
      opacity: 0.7;
      pointer-events: none;
      z-index: 12;
    }
    @media (max-width: 1050px) {
      .timeline {
        width: 99vw;
        padding-left: 0; padding-right: 0;
      }
      .timeline-item {
        left: 0 !important;
        right: unset !important;
        width: 93vw;
        margin-left: auto;
        margin-right: auto;
      }
      .timeline-item.right {
        left: 0 !important;
      }
    }
    @media (max-width: 600px) {
      .timeline {
        border-width: 3px;
        border-radius: 16px 4px 16px 4px;
      }
      .timeline-item {
        border-width: 2px;
        font-size: 0.82em;
        padding: 10px 6vw;
      }
    }
  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
</head>
<body>
  <div class="timeline">
    <div class="timeline-svg-wrapper">
      <svg class="squiggle-svg" id="squiggle-svg"></svg>
    </div>
    <!-- Timeline items inserted here by JS -->
  </div>
  <script>
    // --- Timeline Data ---
    const items = [
      { title: "April 24th, 1990", text: "Hubble Space Telescope is launched expanding our knowlege about the universe." },
      { title: "August 2nd, 1990", text: "Iraq invades Kuwait, which is the foundation of the Gulf War, which involved most of the western world in order to protect oil interests." },
      { title: "July 22nd, 1991", text: "Jeffery Dahmer was arrested after the remains of 11 men are found in his apartment." },
      { title: "April 19th, 1993", text: "A 51 day standoff at the Branch Davidian compound ends with a fire that kills 76 people." },
      { title: "June 11th, 1993", text: "Jurassic Park released globally in theatres." },
      { title: "July 15th, 1993", text: "Michael Jackson was accused of sexual assault on a minor. He was accused by producer Evan Chandler, saying he assaulted his 13 year old son." },
      { title: "January 1st, 1994", text: "The NAFTA was signed, uniting Canada, Mexico, and the United States by trade agreements." },
      { title: "April 8th, 1994", text: "Kurt Cobain, lead singer of Nirvana was found dead in their home." },
      { title: "May 10th, 1994", text: "John Wayne Gacy, man who killed 33 people, was killed by lethal injection." },
      { title: "June 12th, 1994", text: "Nicole Brown Simpson and Ronald Goodman murdered outside of OJ Simpson’s House, with Simpson escaping from the police in a white ford bronco." },
      { title: "March 16th, 1995", text: "Mississippi becomes the last state to ratify the 13th amendment." },
      { title: "April 19th, 1995", text: "Oklahoma City Bombing kills 168 people. This was the deadliest act of homegrown terrorism, perpetrated by Timothy McVeigh and Terry Nichols." },
      { title: "April 3rd, 1996", text: "Theodore Kaczynski, the UNABOMBER, was arrested in his remote Montana cabin." },
      { title: "August 13th, 1997", text: "Netflix INC is founded as a DVD by mail rental company." },
      { title: "August 7th, 1998", text: "The 1998 US Embassy Bombing occurred, the embassies in Dar es Salaam, Tanzania and Nairobi, Kenya killed 228 people. All are linked to Saudi Terrorist Osama Bin Laden." },
      { title: "August 17th, 1998", text: "News broke about the Lewinsky-Clinton scandal, causing the infamous quote  'I did not have sexual relations with that woman, Ms. Lewinsky.'" },
      { title: "April 20th, 1999", text: "Columbine High School Massacre: 2 students killed 12 students and a teacher, killing themselves as the police arrived. This was the first school shooting to have such a national and international impact." },
      { title: "July 23rd-25th, 1999", text: "To close out the decade, the Woodstock 99’ festival was held, causing mass hysteria and chaos. The venue was destroyed and caught fire." },
      { title: "January 1st, 1994", text: "The NAFTA was signed, uniting Canada, Mexico, and the United States by trade agreements."}
    ];

    function randomWiggle(amount) {
      return (Math.random() - 0.5) * amount;
    }

    function randomDepthScale() {
      const r = Math.random();
      if (r < 0.3) return 0.8 + randomWiggle(0.08);
      if (r > 0.7) return 1.2 + randomWiggle(0.10);
      return 1.0 + randomWiggle(0.05);
    }

    // --- Render Timeline Items ---
    const timeline = document.querySelector('.timeline');
    items.forEach((item, i) => {
      const el = document.createElement('div');
      el.className = 'timeline-item ' + (i % 2 === 0 ? 'left' : 'right');
      el.innerHTML = `<h3>${item.title}</h3><p>${item.text}</p>`;
      timeline.appendChild(el);
    });

    // --- Fade-in Animation ---
    const observer = new window.IntersectionObserver(
      (entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('visible');
          } else {
            entry.target.classList.remove('visible');
          }
        });
      },
      { threshold: 0.7 }
    );
    document.querySelectorAll('.timeline-item').forEach(item => observer.observe(item));

    // --- Squiggle SVG Generation ---
    const leftX = 80, rightX = 260, SVG_WIDTH = 340;
    function getItemCentersWithLead() {
      const timelineRect = timeline.getBoundingClientRect();
      const itemsEls = Array.from(document.querySelectorAll('.timeline-item'));
      if (!itemsEls.length) return [];
      const wiggleAmountX = 30;
      const wiggleAmountY = 24;
      const minYStep = 40;

      // Generate a depth (scale) for each point (except endpoints)
      const depthScales = [1.0];
      for (let i = 1; i < itemsEls.length - 1; i++) {
        depthScales.push(randomDepthScale());
      }
      depthScales.push(1.0);

      let centers = itemsEls.map((el, i) => {
        const rect = el.getBoundingClientRect();
        let y = (rect.top + el.offsetHeight / 2) - timelineRect.top;
        let x = i % 2 === 0 ? leftX : rightX;

        let scale = depthScales[i];
        if (i > 0 && i < itemsEls.length - 1) {
          x = leftX + (rightX - leftX) * (i % 2) * scale + randomWiggle(wiggleAmountX * scale);
          y = y * scale + randomWiggle(wiggleAmountY * scale);
        }
        return { x, y, scale };
      });

      // Ensure y never goes back up (always increasing by at least minYStep)
      for (let i = 1; i < centers.length; i++) {
        if (centers[i].y < centers[i - 1].y + minYStep) {
          centers[i].y = centers[i - 1].y + minYStep;
        }
      }

      // Add a virtual point above the first item for "lead"
      const leadY = Math.min(centers[0].y - 140, centers[0].y - minYStep * 2) + randomWiggle(wiggleAmountY);
      centers.unshift({ x: leftX + randomWiggle(wiggleAmountX), y: leadY, scale: 1.0 });
      return centers;
    }

    function catmullRom2bezier(pts) {
      if (pts.length < 2) return "";
      const ctrlWiggle = 14;
      let d = `M${pts[0].x},${pts[0].y}`;
      for (let i = 0; i < pts.length - 1; i++) {
        const p0 = pts[i === 0 ? 0 : i - 1];
        const p1 = pts[i];
        const p2 = pts[i + 1];
        const p3 = pts[i + 2 < pts.length ? i + 2 : pts.length - 1];

        let c1x = p1.x + (p2.x - p0.x) / 6 + randomWiggle(ctrlWiggle * p1.scale);
        let c1y = p1.y + (p2.y - p0.y) / 6 + randomWiggle(ctrlWiggle * p1.scale);
        let c2x = p2.x - (p3.x - p1.x) / 6 + randomWiggle(ctrlWiggle * p2.scale);
        let c2y = p2.y - (p3.y - p1.y) / 6 + randomWiggle(ctrlWiggle * p2.scale);

        d += ` C${c1x},${c1y} ${c2x},${c2y} ${p2.x},${p2.y}`;
      }
      return d;
    }

    function drawSVGPath() {
      const centers = getItemCentersWithLead();
      const svg = document.getElementById('squiggle-svg');
      svg.setAttribute('width', SVG_WIDTH);
      svg.setAttribute('height', timeline.offsetHeight);

      svg.innerHTML = '';
      const pathData = catmullRom2bezier(centers);

      // Black outline
      const pathOutline = document.createElementNS("http://www.w3.org/2000/svg", "path");
      pathOutline.classList.add('squiggle-path-outline');
      pathOutline.setAttribute('d', pathData);
      svg.appendChild(pathOutline);

      // White main line
      const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
      path.classList.add('squiggle-path');
      path.setAttribute('d', pathData);
      svg.appendChild(path);

      const totalLength = path.getTotalLength();
      path.style.strokeDasharray = totalLength;
      path.style.strokeDashoffset = totalLength;
      gsap.killTweensOf(path);
      ScrollTrigger.getAll().forEach(trigger => trigger.kill());
      gsap.to(path, {
        strokeDashoffset: 0,
        ease: "none",
        scrollTrigger: {
          trigger: ".timeline",
          start: "top 70%",
          end: "bottom top",
          scrub: true
        }
      });
    }

    function redrawEverything() {
      drawSVGPath();
    }
    window.addEventListener('resize', redrawEverything);
    window.addEventListener('DOMContentLoaded', redrawEverything);
    window.addEventListener('load', redrawEverything);
    setTimeout(redrawEverything, 500);
  </script>
</body>
</html>
