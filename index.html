<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>George Pickens</title>
  <script src="games/index.js" defer></script>

</head>
<body>
  <div id="navbar-container"></div>
  <div id="content"></div>

<script>
  const routes = {
    "home": "home/home.html",
    "games": "games/index.html",
    "movies": "movies/index.html",
    "about/changelog": "about/changelog.html"
  };

  function loadPageFromHash() {
    const hash = location.hash.slice(1);
    const page = routes[hash] || routes["home"];
    fetch(page)
      .then(res => {
        if (!res.ok) throw new Error("Page not found");
        return res.text();
      })
      .then(html => {
        document.getElementById("content").innerHTML = html;
      })
      .catch(err => {
        document.getElementById("content").innerHTML = "<p>Failed to load page.</p>";
        console.error(err);
      });
  }

  // Handle initial load and hash changes
  window.addEventListener("hashchange", loadPageFromHash);
  window.addEventListener("DOMContentLoaded", () => {
    // Load the navbar first
    fetch('dev/navbar.html')
  .then(res => res.text())
  .then(html => {
    const tempDiv = document.createElement('div');
    tempDiv.innerHTML = html;
    const template = tempDiv.querySelector('template');
    const clone = template.content.cloneNode(true);
    document.getElementById("navbar-container").appendChild(clone);

    // Then load the correct content
    loadPageFromHash();
  })
  .catch(err => {
    console.error("Failed to load navbar:", err);
    document.getElementById("navbar-container").innerHTML = "<p>Navbar failed to load.</p>";
  });
    fetch('dev/navbar.html')
  .then(res => res.text())
  .then(html => {
    const tempDiv = document.createElement('div');
    tempDiv.innerHTML = html;
    const template = tempDiv.querySelector('template');
    const clone = template.content.cloneNode(true);
    document.getElementById("navbar-container").appendChild(clone);

    // Then load the correct content
    loadPageFromHash();
  })
  .catch(err => {
    console.error("Failed to load navbar:", err);
    document.getElementById("navbar-container").innerHTML = "<p>Navbar failed to load.</p>";
  });
    fetch('dev/navbar.html')
  .then(res => res.text())
  .then(html => {
    const tempDiv = document.createElement('div');
    tempDiv.innerHTML = html;
    const template = tempDiv.querySelector('template');
    const clone = template.content.cloneNode(true);
    document.getElementById("navbar-container").appendChild(clone);

    // Then load the correct content
    loadPageFromHash();
  })
  .catch(err => {
    console.error("Failed to load navbar:", err);
    document.getElementById("navbar-container").innerHTML = "<p>Navbar failed to load.</p>";
  });

    // Then load content
    loadPageFromHash();
  });
</script>
</body>
</html>
